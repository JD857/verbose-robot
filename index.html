<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¹¸è¿æ¸¸æˆå… - å¼€å¿ƒè½¬è½¬ä¹</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', 'Microsoft YaHei', sans-serif; }
        body { 
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c); 
            min-height: 100vh; 
            padding: 20px; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            color: #fff;

        }
        .game-container {
            max-width: 1200px;
            width: 100%;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        /* æœªç™»å½•é®ç½© */
        .login-mask {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(8px);
            z-index: 999;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        .login-mask.hidden {
            opacity: 0;
            visibility: hidden;
        }
        .login-panel {
            background: linear-gradient(135deg, #2d3748, #1a202c);
            border-radius: 20px;
            padding: 40px;
            max-width: 450px;
            width: 90%;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            border: 2px solid #ffd700;
        }
        .login-panel h2 {
            font-size: 2rem;
            margin-bottom: 30px;
            text-align: center;
            background: linear-gradient(90deg, #ffd700, #ff9500);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        .form-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .form-tab {
            padding: 10px 20px;
            cursor: pointer;
            color: #ccc;
            font-weight: bold;
            border-bottom: 3px solid transparent;
        }
        .form-tab.active {
            color: #ffd700;
            border-bottom-color: #ffd700;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #e0e0e0;
        }
        .form-control {
            width: 100%;
            padding: 12px 15px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.05);
            color: #fff;
            font-size: 1rem;
        }
        .form-control:focus {
            outline: none;
            border-color: #ffd700;
        }
        .submit-btn {
            width: 100%;
            padding: 15px;
            border-radius: 8px;
            border: none;
            background: linear-gradient(90deg, #ffd700, #ff9500);
            color: #1a202c;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s ease;
            margin-top: 10px;
        }
        .submit-btn:hover {
            transform: translateY(-2px);
        }
        .form-alert {
            text-align: center;
            margin-top: 15px;
            color: #ff6b6b;
            font-size: 0.9rem;
        }
        /* å¤´éƒ¨åŒºåŸŸ */
        .header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }
        .user-info {
            position: absolute;
            top: 0;
            right: 0;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .username {
            color: #ffd700;
            font-weight: bold;
            font-size: 1.1rem;
        }
        .logout-btn {
            padding: 6px 15px;
            border-radius: 50px;
            border: none;
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .logout-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        .header h1 {
            font-size: 2.5rem;
            background: linear-gradient(90deg, #ffd700, #ff9500, #ffd700);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
            margin-bottom: 15px;
        }
        .vip-status {
            background: rgba(255, 215, 0, 0.15);
            padding: 8px 20px;
            border-radius: 50px;
            display: inline-block;
            margin-bottom: 15px;
            border: 1px solid rgba(255, 215, 0, 0.4);
        }
        .vip-status span {
            color: #ffd700;
            font-weight: bold;
        }
        .coin-balance {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            background: rgba(255, 215, 0, 0.1);
            padding: 12px 24px;
            border-radius: 50px;
            border: 1px solid rgba(255, 215, 0, 0.3);
            inline-size: fit-content;
            margin: 0 auto 20px;
        }
        .coin-icon {
            font-size: 1.5rem;
            color: #ffd700;
            text-shadow: 0 0 8px rgba(255, 215, 0, 0.5);
        }
        .coin-count {
            font-size: 1.8rem;
            font-weight: bold;
            color: #fff;
        }
        /* æ¸¸æˆæ¨¡å¼åˆ‡æ¢ */
        .mode-switch {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .mode-btn {
            padding: 8px 20px;
            border-radius: 50px;
            border: 2px solid transparent;
            background: rgba(255, 255, 255, 0.08);
            color: #fff;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .mode-btn.active {
            border-color: #ffd700;
            background: rgba(255, 215, 0, 0.2);
            color: #ffd700;
        }
        .mode-btn:hover:not(.active) {
            background: rgba(255, 255, 255, 0.15);
        }
        .bet-info {
            text-align: center;
            margin-bottom: 15px;
            color: #ffd700;
            font-size: 1.2rem;
            font-weight: bold;
        }
        /* è½¬ç›˜åŒºåŸŸ */
        .wheel-container {
            position: relative;
            width: 100%;
            max-width: 550px;
            margin: 0 auto 40px;
        }
        .wheel {
            width: 100%;
            aspect-ratio: 1/1;
            border-radius: 50%;
            background: conic-gradient(
                #4ecdc4 0% 14.28%, /* 5å¸ */
                #45b7d1 14.28% 28.56%, /* 10å¸ */
                #9c27b0 28.56% 42.84%, /* 20å¸ */
                #ff9500 42.84% 57.12%, /* 30å¸ */
                #ff6b6b 57.12% 71.4%, /* 50å¸ */
                #ffd700 71.4% 85.68%, /* å€æ•° */
                #e53e3e 85.68% 100% /* JPå¤§å¥– */
            );
            position: relative;
            transition: transform 6s cubic-bezier(0.2, 0.8, 0.2, 1);
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.2), inset 0 0 20px rgba(0, 0, 0, 0.3);
            border: 8px solid rgba(255, 255, 255, 0.1);
        }
        .wheel::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 18%;
            height: 18%;
            background: linear-gradient(135deg, #fff, #eee);
            border-radius: 50%;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.2);
            z-index: 1;
        }
        .wheel::after {
            content: 'ğŸ®';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2.2rem;
            z-index: 2;
        }
        /* æ‰‡åŒºæ–‡å­— */
        .wheel-segment {
            position: absolute;
            width: 50%;
            height: 50%;
            top: 0;
            left: 50%;
            transform-origin: bottom left;
        }
        .wheel-segment span {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(calc(var(--rotate) + 45deg));
            color: #fff;
            font-weight: bold;
            font-size: 1.3rem;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.7);
            width: 70%;
            text-align: center;
            display: inline-block;
            white-space: nowrap;
        }
        .pointer {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 30px solid transparent;
            border-right: 30px solid transparent;
            border-bottom: 45px solid #ffd700;
            z-index: 10;
            filter: drop-shadow(0 3px 5px rgba(0, 0, 0, 0.3));
        }
        .pointer::after {
            content: '';
            position: absolute;
            bottom: -40px;
            left: -18px;
            width: 36px;
            height: 12px;
            background: #ff9500;
            border-radius: 3px;
        }
        /* æ“ä½œæŒ‰é’® */
        .controls {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-bottom: 40px;
        }
        .btn {
            padding: 15px 35px;
            border-radius: 50px;
            border: none;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        .start-btn {
            background: linear-gradient(90deg, #4caf50, #81c784);
            color: #fff;
        }
        .start-btn:disabled {
            background: linear-gradient(90deg, #9e9e9e, #bdbdbd);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        .start-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
        }
        .stop-btn {
            background: linear-gradient(90deg, #e53e3e, #ef5350);
            color: #fff;
        }
        .stop-btn:disabled {
            background: linear-gradient(90deg, #9e9e9e, #bdbdbd);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        .stop-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(229, 62, 62, 0.4);
        }
        /* å¥–é¡¹è¯´æ˜ */
        .prize-list {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 40px;
        }
        .prize-list h3 {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: #ffd700;
            text-align: center;
        }
        .prize-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 12px;
        }
        .prize-item {
            background: rgba(255, 255, 255, 0.08);
            padding: 12px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .prize-item span {
            font-weight: bold;
            font-size: 1.1rem;
        }
        .prize-5 { background: linear-gradient(135deg, rgba(78, 205, 196, 0.2), transparent); border-color: #4ecdc4; }
        .prize-10 { background: linear-gradient(135deg, rgba(69, 183, 209, 0.2), transparent); border-color: #45b7d1; }
        .prize-20 { background: linear-gradient(135deg, rgba(156, 39, 176, 0.2), transparent); border-color: #9c27b0; }
        .prize-30 { background: linear-gradient(135deg, rgba(255, 149, 0, 0.2), transparent); border-color: #ff9500; }
        .prize-50 { background: linear-gradient(135deg, rgba(255, 107, 107, 0.2), transparent); border-color: #ff6b6b; }
        .prize-multi { background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), transparent); border-color: #ffd700; }
        .prize-jp { background: linear-gradient(135deg, rgba(229, 62, 62, 0.2), transparent); border-color: #e53e3e; }
        /* VIPåŒºåŸŸ */
        .vip-section {
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.2), rgba(50, 50, 150, 0.3));
            border-radius: 20px;
            padding: 25px;
            border: 1px solid rgba(255, 215, 0, 0.2);
            margin-bottom: 40px;
        }
        .vip-section h3 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            text-align: center;
            background: linear-gradient(90deg, #ffd700, #ff6b00);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        .vip-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
        }
        .vip-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }
        .vip-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
        }
        .vip-card.active {
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }
        .vip-1 { border-color: #9e9e9e; }
        .vip-1::before { background: #9e9e9e; }
        .vip-1:hover { border-color: #bdbdbd; }
        .vip-2 { border-color: #4caf50; }
        .vip-2::before { background: #4caf50; }
        .vip-2:hover { border-color: #81c784; }
        .vip-3 { border-color: #2196f3; }
        .vip-3::before { background: #2196f3; }
        .vip-3:hover { border-color: #64b5f6; }
        .vip-4 { border-color: #9c27b0; }
        .vip-4::before { background: #9c27b0; }
        .vip-4:hover { border-color: #ba68c8; }
        .vip-5 { border-color: #ffd700; animation: vipGlow 2s infinite alternate; }
        .vip-5::before { background: #ffd700; }
        .vip-card h4 {
            font-size: 1.3rem;
            margin-bottom: 10px;
        }
        .vip-price {
            font-size: 1.5rem;
            font-weight: bold;
            color: #ffd700;
            margin-bottom: 8px;
        }
        .vip-desc {
            font-size: 0.95rem;
            color: #e0e0e0;
            margin-bottom: 12px;
        }
        .buy-vip-btn {
            padding: 8px 18px;
            border-radius: 50px;
            border: none;
            background: linear-gradient(90deg, #ffd700, #ff9500);
            color: #1a202c;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        .buy-vip-btn:hover {
            transform: translateY(-2px);
        }
        .buy-vip-btn.disabled {
            background: linear-gradient(90deg, #9e9e9e, #bdbdbd);
            cursor: not-allowed;
        }
        /* æ’è¡Œæ¦œåŒºåŸŸ */
        .ranking-section {
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.2), rgba(50, 50, 150, 0.3));
            border-radius: 20px;
            padding: 25px;
            border: 1px solid rgba(255, 215, 0, 0.2);
        }
        .ranking-section h3 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            text-align: center;
            background: linear-gradient(90deg, #ffd700, #ff6b00);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        .ranking-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .ranking-item {
            display: flex;
            align-items: center;
            gap: 15px;
            background: rgba(255, 255, 255, 0.05);
            padding: 12px 20px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .ranking-rank {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #fff;
        }
        .ranking-rank.top1 { background: #ffd700; color: #1a202c; }
        .ranking-rank.top2 { background: #e0e0e0; color: #1a202c; }
        .ranking-rank.top3 { background: #cd7f32; color: #fff; }
        .ranking-username {
            flex: 1;
            font-weight: bold;
        }
        .ranking-score {
            color: #ffd700;
            font-weight: bold;
            font-size: 1.1rem;
        }
        .ranking-empty {
            text-align: center;
            padding: 30px;
            color: #ccc;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        /* å¼¹çª—æ ·å¼ */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        .modal.active {
            opacity: 1;
            visibility: visible;
        }
        .modal-content {
            background: linear-gradient(135deg, #2d3748, #1a202c);
            border-radius: 20px;
            padding: 40px;
            max-width: 400px;
            width: 90%;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            border: 2px solid #ffd700;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }
        .modal.active .modal-content {
            transform: scale(1);
        }
        .modal-title {
            font-size: 2rem;
            margin-bottom: 20px;
            background: linear-gradient(90deg, #ffd700, #ff9500);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        .modal-desc {
            font-size: 1.2rem;
            margin-bottom: 30px;
            color: #e2e8f0;
        }
        .modal-btn {
            background: linear-gradient(90deg, #ffd700, #ff9500);
            color: #1a202c;
            padding: 12px 30px;
            border-radius: 50px;
            border: none;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .modal-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
        }
        .jp-animation {
            animation: jpFlash 0.5s infinite alternate;
        }
        @keyframes jpFlash {
            from { box-shadow: 0 0 20px #e53e3e, 0 0 40px #e53e3e; }
            to { box-shadow: 0 0 30px #ff3d00, 0 0 60px #ff3d00, 0 0 80px #ff3d00; }
        }
        @keyframes vipGlow {
            from { box-shadow: 0 0 10px #ffd700; }
            to { box-shadow: 0 0 20px #ffd700, 0 0 30px rgba(255, 215, 0, 0.5); }
        }
        /* å“åº”å¼é€‚é… */
        @media (max-width: 768px) {
            .game-container {
                padding: 20px;
            }
            .header h1 {
                font-size: 2rem;
            }
            .user-info {
                position: static;
                margin-bottom: 15px;
                justify-content: center;
            }
            .coin-count {
                font-size: 1.5rem;
            }
            .controls {
                flex-direction: column;
                gap: 15px;
                padding: 0 20px;
            }
            .btn {
                padding: 12px 25px;
                font-size: 1.1rem;
            }
            .prize-grid, .vip-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .vip-card {
                padding: 15px;
            }
            .mode-btn {
                padding: 6px 15px;
                font-size: 0.9rem;
            }
            .ranking-item {
                gap: 10px;
                padding: 10px 15px;
            }
            .ranking-rank {
                width: 25px;
                height: 25px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <!-- æœªç™»å½•é®ç½© -->
    <div class="login-mask" id="login-mask">
        <div class="login-panel">
            <h2>ğŸ® å¹¸è¿æ¸¸æˆå…ç™»å½•</h2>
            <div class="form-tabs">
                <div class="form-tab active" data-form="login">ç™»å½•</div>
                <div class="form-tab" data-form="register">æ³¨å†Œ</div>
            </div>
            <!-- ç™»å½•è¡¨å• -->
            <form id="login-form" class="form">
                <div class="form-group">
                    <label for="login-username">ç”¨æˆ·å</label>
                    <input type="text" id="login-username" class="form-control" placeholder="è¯·è¾“å…¥ç”¨æˆ·å" required>
                </div>
                <div class="form-group">
                    <label for="login-password">å¯†ç </label>
                    <input type="password" id="login-password" class="form-control" placeholder="è¯·è¾“å…¥å¯†ç " required>
                </div>
                <button type="submit" class="submit-btn">ç™»å½•æ¸¸æˆ</button>
                <div class="form-alert" id="login-alert"></div>
            </form>
            <!-- æ³¨å†Œè¡¨å• -->
            <form id="register-form" class="form" style="display: none;">
                <div class="form-group">
                    <label for="register-username">ç”¨æˆ·å</label>
                    <input type="text" id="register-username" class="form-control" placeholder="è¯·è®¾ç½®ç”¨æˆ·åï¼ˆ3-10ä½ï¼‰" required>
                </div>
                <div class="form-group">
                    <label for="register-password">å¯†ç </label>
                    <input type="password" id="register-password" class="form-control" placeholder="è¯·è®¾ç½®å¯†ç ï¼ˆ6-16ä½ï¼‰" required>
                </div>
                <button type="submit" class="submit-btn">æ³¨å†Œè´¦å·</button>
                <div class="form-alert" id="register-alert"></div>
            </form>
        </div>
    </div>

    <div class="game-container">
        <!-- å¤´éƒ¨ï¼šç”¨æˆ·ä¿¡æ¯+æ ‡é¢˜+VIPçŠ¶æ€+æ¸¸æˆå¸ä½™é¢ -->
        <div class="header">
            <div class="user-info">
                <span class="username" id="current-username">æ¸¸å®¢</span>
                <button class="logout-btn" id="logout-btn">é€€å‡ºç™»å½•</button>
            </div>
            <h1>å¼€å¿ƒè½¬è½¬ä¹ ğŸ°</h1>
            <div class="vip-status">å½“å‰VIPç­‰çº§ï¼š<span id="current-vip">æ™®é€šç”¨æˆ·</span> | ä¸­å¥–æ¦‚ç‡ï¼š<span id="vip-rate">0%</span></div>
            <div class="coin-balance">
                <span class="coin-icon">ğŸª™</span>
                <span>å‰©ä½™æ¸¸æˆå¸ï¼š</span>
                <span class="coin-count" id="coin-balance">10000</span>
            </div>

            <!-- æ¸¸æˆæ¨¡å¼åˆ‡æ¢ -->
            <div class="mode-switch">
                <button class="mode-btn active" data-mode="normal" data-bet="10" data-jp="1000">æ™®é€šå±€ï¼ˆ10å¸ï¼‰</button>
                <button class="mode-btn" data-mode="high" data-bet="100" data-jp="2000">é«˜ç«¯å±€ï¼ˆ100å¸ï¼‰</button>
                <button class="mode-btn" data-mode="rich" data-bet="10000" data-jp="10000">å¯Œè±ªå±€ï¼ˆ10000å¸ï¼‰</button>
            </div>

            <div class="bet-info">ğŸ® æœ¬æ¬¡éœ€æŠ•å¸ <strong id="current-bet">10</strong> æš | JPå¤§å¥–ï¼š<strong id="current-jp">1000</strong> å¸</div>
        </div>

        <!-- è½¬ç›˜åŒºåŸŸ -->
        <div class="wheel-container">
            <div class="wheel" id="wheel">
                <div class="wheel-segment" style="transform: rotate(0deg); --rotate: 0deg"><span>5å¸</span></div>
                <div class="wheel-segment" style="transform: rotate(51.43deg); --rotate: 51.43deg"><span>10å¸</span></div>
                <div class="wheel-segment" style="transform: rotate(102.86deg); --rotate: 102.86deg"><span>20å¸</span></div>
                <div class="wheel-segment" style="transform: rotate(154.29deg); --rotate: 154.29deg"><span>30å¸</span></div>
                <div class="wheel-segment" style="transform: rotate(205.72deg); --rotate: 205.72deg"><span>50å¸</span></div>
                <div class="wheel-segment" style="transform: rotate(257.15deg); --rotate: 257.15deg"><span id="multi-text">Ã—2</span></div>
                <div class="wheel-segment" style="transform: rotate(308.58deg); --rotate: 308.58deg"><span id="jp-text">JP</span></div>
            </div>
            <div class="pointer"></div>
        </div>

        <!-- æ“ä½œæŒ‰é’® -->
        <div class="controls">
            <button class="btn start-btn" id="start-btn">å¼€å§‹æ—‹è½¬</button>
            <button class="btn stop-btn" id="stop-btn" disabled>åœæ­¢</button>
        </div>

        <!-- å¥–é¡¹è¯´æ˜ -->
        <div class="prize-list">
            <h3>å½“å‰æ¨¡å¼å¥–é¡¹è¯´æ˜</h3>
            <div class="prize-grid">
                <div class="prize-item prize-5"><span>5ä¸ªæ¸¸æˆå¸</span></div>
                <div class="prize-item prize-10"><span>10ä¸ªæ¸¸æˆå¸</span></div>
                <div class="prize-item prize-20"><span>20ä¸ªæ¸¸æˆå¸</span></div>
                <div class="prize-item prize-30"><span>30ä¸ªæ¸¸æˆå¸</span></div>
                <div class="prize-item prize-50"><span>50ä¸ªæ¸¸æˆå¸</span></div>
                <div class="prize-item prize-multi"><span id="prize-multi">ä½™é¢Ã—2</span></div>
                <div class="prize-item prize-jp"><span id="prize-jp">JPå¤§å¥– 1000å¸</span></div>
            </div>
        </div>

        <!-- VIPåŠç†åŒºåŸŸ -->
        <div class="vip-section">
            <h3>ğŸ’ VIPç‰¹æƒåŠç†ï¼ˆç«‹å³ç”Ÿæ•ˆï¼‰</h3>
            <div class="vip-grid">
                <div class="vip-card vip-1" data-level="1" data-price="1000" data-rate="5">
                    <h4>æ™®é€šVIP</h4>
                    <div class="vip-price">1000å¸</div>
                    <div class="vip-desc">ä¸­å¥–æ¦‚ç‡+5% | åŸºç¡€ç‰¹æƒ</div>
                    <button class="buy-vip-btn" id="buy-vip-1">ç«‹å³åŠç†</button>
                </div>
                <div class="vip-card vip-2" data-level="2" data-price="10000" data-rate="15">
                    <h4>è‡³å°ŠVIP</h4>
                    <div class="vip-price">10000å¸</div>
                    <div class="vip-desc">ä¸­å¥–æ¦‚ç‡+15% | é«˜çº§ç‰¹æƒ</div>
                    <button class="buy-vip-btn" id="buy-vip-2">ç«‹å³åŠç†</button>
                </div>
                <div class="vip-card vip-3" data-level="3" data-price="50000" data-rate="30">
                    <h4>é’»çŸ³VIP</h4>
                    <div class="vip-price">50000å¸</div>
                    <div class="vip-desc">ä¸­å¥–æ¦‚ç‡+30% | è±ªåç‰¹æƒ</div>
                    <button class="buy-vip-btn" id="buy-vip-3">ç«‹å³åŠç†</button>
                </div>
                <div class="vip-card vip-4" data-level="4" data-price="100000" data-rate="50">
                    <h4>è¶…çº§VIP</h4>
                    <div class="vip-price">100000å¸</div>
                    <div class="vip-desc">ä¸­å¥–æ¦‚ç‡+50% | é¡¶çº§ç‰¹æƒ</div>
                    <button class="buy-vip-btn" id="buy-vip-4">ç«‹å³åŠç†</button>
                </div>
                <div class="vip-card vip-5" data-level="5" data-price="1000000" data-rate="100">
                    <h4>è¶…çº§è‡³å°ŠVIP</h4>
                    <div class="vip-price">1000000å¸</div>
                    <div class="vip-desc">ä¸­å¥–æ¦‚ç‡+100% | JPå¿…ä¸­1æ¬¡</div>
                    <button class="buy-vip-btn" id="buy-vip-5">ç«‹å³åŠç†</button>
                </div>
            </div>
        </div>

        <!-- å…¨æœæ’è¡Œæ¦œ -->
        <div class="ranking-section">
            <h3>ğŸ† å…¨æœå¯Œè±ªæ’è¡Œæ¦œï¼ˆTop10ï¼‰</h3>
            <div class="ranking-list" id="ranking-list">
                <!-- æ’è¡Œæ¦œå†…å®¹ç”±JSåŠ¨æ€ç”Ÿæˆ -->
                <div class="ranking-empty" id="ranking-empty">æš‚æ— æ’è¡Œæ¦œæ•°æ®ï¼Œæˆä¸ºç¬¬ä¸€ä¸ªä¸Šæ¦œçš„å¯Œè±ªå§ï¼</div>
            </div>
        </div>
    </div>

    <!-- å„ç±»å¼¹çª— -->
    <div class="modal" id="prize-modal">
        <div class="modal-content" id="modal-content">
            <h2 class="modal-title" id="modal-title">æ­å–œä¸­å¥–ï¼</h2>
            <p class="modal-desc" id="modal-desc">è·å¾—10ä¸ªæ¸¸æˆå¸ï½</p>
            <button class="modal-btn" id="modal-btn">ç¡®è®¤</button>
        </div>
    </div>

    <div class="modal" id="balance-modal">
        <div class="modal-content">
            <h2 class="modal-title">âš ï¸ ä½™é¢ä¸è¶³</h2>
            <p class="modal-desc">å½“å‰æ¸¸æˆå¸ä¸è¶³ï¼Œæ— æ³•è¿›è¡Œæ“ä½œï½</p>
            <button class="modal-btn" id="balance-modal-btn">ç¡®è®¤</button>
        </div>
    </div>

    <div class="modal" id="vip-success-modal">
        <div class="modal-content">
            <h2 class="modal-title">ğŸ‰ VIPåŠç†æˆåŠŸï¼</h2>
            <p class="modal-desc" id="vip-success-desc">æˆåŠŸå¼€é€šæ™®é€šVIPï¼Œä¸­å¥–æ¦‚ç‡+5%ï½</p>
            <button class="modal-btn" id="vip-success-btn">ç¡®è®¤</button>
        </div>
    </div>

    <script>
        // -------------------------- æœ¬åœ°å­˜å‚¨æ ¸å¿ƒé…ç½® --------------------------
        // å­˜å‚¨é”®å
        const STORAGE_KEYS = {
            USERS: 'lucky_game_users',
            CURRENT_USER: 'lucky_game_current_user',
            RANKING: 'lucky_game_ranking'
        };

        // åˆå§‹åŒ–æœ¬åœ°å­˜å‚¨ï¼ˆé¦–æ¬¡è®¿é—®æ—¶ï¼‰
        function initStorage() {
            if (!localStorage.getItem(STORAGE_KEYS.USERS)) localStorage.setItem(STORAGE_KEYS.USERS, JSON.stringify([]));
            if (!localStorage.getItem(STORAGE_KEYS.RANKING)) localStorage.setItem(STORAGE_KEYS.RANKING, JSON.stringify([]));
        }

        // è·å–ç”¨æˆ·åˆ—è¡¨
        function getUsers() {
            return JSON.parse(localStorage.getItem(STORAGE_KEYS.USERS) || '[]');
        }

        // ä¿å­˜ç”¨æˆ·åˆ—è¡¨
        function saveUsers(users) {
            localStorage.setItem(STORAGE_KEYS.USERS, JSON.stringify(users));
        }

        // è·å–å½“å‰ç™»å½•ç”¨æˆ·
        function getCurrentUser() {
            return JSON.parse(localStorage.getItem(STORAGE_KEYS.CURRENT_USER) || 'null');
        }

        // ä¿å­˜å½“å‰ç™»å½•ç”¨æˆ·
        function saveCurrentUser(user) {
            localStorage.setItem(STORAGE_KEYS.CURRENT_USER, JSON.stringify(user));
        }

        // è·å–æ’è¡Œæ¦œ
        function getRanking() {
            return JSON.parse(localStorage.getItem(STORAGE_KEYS.RANKING) || '[]');
        }

        // æ›´æ–°æ’è¡Œæ¦œï¼ˆæŒ‰ä½™é¢é™åºï¼Œå–Top10ï¼‰
        function updateRanking(user) {
            const ranking = getRanking();
            // ç§»é™¤å½“å‰ç”¨æˆ·æ—§æ•°æ®
            const newRanking = ranking.filter(item => item.username !== user.username);
            // æ·»åŠ æ–°æ•°æ®
            newRanking.push({
                username: user.username,
                balance: user.balance,
                vipLevel: user.vipLevel,
                updateTime: new Date().getTime()
            });
            // æ’åºå¹¶å–Top10
            newRanking.sort((a, b) => b.balance - a.balance);
            const topRanking = newRanking.slice(0, 10);
            // ä¿å­˜æ’è¡Œæ¦œ
            localStorage.setItem(STORAGE_KEYS.RANKING, JSON.stringify(topRanking));
            // æ¸²æŸ“æ’è¡Œæ¦œ
            renderRanking();
        }

        // -------------------------- è´¦å·ç®¡ç†åŠŸèƒ½ --------------------------
        const loginMask = document.getElementById('login-mask');
        const loginForm = document.getElementById('login-form');
        const registerForm = document.getElementById('register-form');
        const loginAlert = document.getElementById('login-alert');
        const registerAlert = document.getElementById('register-alert');
        const currentUsernameEl = document.getElementById('current-username');
        const logoutBtn = document.getElementById('logout-btn');

        // è¡¨å•åˆ‡æ¢ï¼ˆç™»å½•/æ³¨å†Œï¼‰
        document.querySelectorAll('.form-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.form-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                if (tab.dataset.form === 'login') {
                    loginForm.style.display = 'block';
                    registerForm.style.display = 'none';
                    loginAlert.textContent = '';
                } else {
                    loginForm.style.display = 'none';
                    registerForm.style.display = 'block';
                    registerAlert.textContent = '';
                }
            });
        });

        // æ³¨å†ŒåŠŸèƒ½
        registerForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const username = document.getElementById('register-username').value.trim();
            const password = document.getElementById('register-password').value.trim();
            const users = getUsers();

            // éªŒè¯è§„åˆ™
            if (username.length < 3 || username.length > 10) {
                registerAlert.textContent = 'ç”¨æˆ·åéœ€ä¸º3-10ä½å­—ç¬¦';
                return;
            }
            if (password.length < 6 || password.length > 16) {
                registerAlert.textContent = 'å¯†ç éœ€ä¸º6-16ä½å­—ç¬¦';
                return;
            }
            if (users.some(user => user.username === username)) {
                registerAlert.textContent = 'ç”¨æˆ·åå·²è¢«æ³¨å†Œ';
                return;
            }

            // åˆ›å»ºæ–°ç”¨æˆ·ï¼ˆåˆå§‹æ•°æ®ï¼‰
            const newUser = {
                username,
                password,
                balance: 10000,
                vipLevel: 0,
                vipRate: 0,
                jpGuaranteed: false,
                lastLogin: new Date().getTime()
            };

            // ä¿å­˜ç”¨æˆ·
            users.push(newUser);
            saveUsers(users);
            saveCurrentUser(newUser);

            // åˆå§‹åŒ–æ¸¸æˆæ•°æ®
            initGameData(newUser);
            // éšè—ç™»å½•é®ç½©
            loginMask.classList.add('hidden');
            // é‡ç½®è¡¨å•
            registerForm.reset();
        });

        // ç™»å½•åŠŸèƒ½
        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const username = document.getElementById('login-username').value.trim();
            const password = document.getElementById('login-password').value.trim();
            const users = getUsers();

            // æŸ¥æ‰¾ç”¨æˆ·
            const user = users.find(u => u.username === username && u.password === password);
            if (!user) {
                loginAlert.textContent = 'ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯';
                return;
            }

            // æ›´æ–°æœ€åç™»å½•æ—¶é—´
            user.lastLogin = new Date().getTime();
            saveUsers(users);
            saveCurrentUser(user);

            // åˆå§‹åŒ–æ¸¸æˆæ•°æ®
            initGameData(user);
            // éšè—ç™»å½•é®ç½©
            loginMask.classList.add('hidden');
            // é‡ç½®è¡¨å•
            loginForm.reset();
        });

        // é€€å‡ºç™»å½•
        logoutBtn.addEventListener('click', () => {
            // ä¿å­˜å½“å‰ç”¨æˆ·æ•°æ®åˆ°ç”¨æˆ·åˆ—è¡¨
            const currentUser = getCurrentUser();
            if (currentUser) {
                const users = getUsers();
                const userIndex = users.findIndex(u => u.username === currentUser.username);
                if (userIndex !== -1) {
                    users[userIndex] = { ...users[userIndex], ...currentUser };
                    saveUsers(users);
                    // æ›´æ–°æ’è¡Œæ¦œ
                    updateRanking(currentUser);
                }
            }

            // æ¸…é™¤å½“å‰ç”¨æˆ·
            saveCurrentUser(null);
            // æ˜¾ç¤ºç™»å½•é®ç½©
            loginMask.classList.remove('hidden');
        });

        // -------------------------- æ¸¸æˆæ ¸å¿ƒåŠŸèƒ½ --------------------------
        // æ¸¸æˆå…ƒç´ 
        const wheel = document.getElementById('wheel');
        const startBtn = document.getElementById('start-btn');
        const stopBtn = document.getElementById('stop-btn');
        const coinBalanceEl = document.getElementById('coin-balance');
        const currentBetEl = document.getElementById('current-bet');
        const currentJpEl = document.getElementById('current-jp');
        const multiTextEl = document.getElementById('multi-text');
        const jpTextEl = document.getElementById('jp-text');
        const prizeMultiEl = document.getElementById('prize-multi');
        const prizeJpEl = document.getElementById('prize-jp');
        const currentVipEl = document.getElementById('current-vip');
        const vipRateEl = document.getElementById('vip-rate');
        const rankingListEl = document.getElementById('ranking-list');
        const rankingEmptyEl = document.getElementById('ranking-empty');

        // å¼¹çª—å…ƒç´ 
        const prizeModal = document.getElementById('prize-modal');
        const balanceModal = document.getElementById('balance-modal');
        const vipSuccessModal = document.getElementById('vip-success-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalDesc = document.getElementById('modal-desc');
        const vipSuccessDescEl = document.getElementById('vip-success-desc');

        // æ¸¸æˆæ ¸å¿ƒå˜é‡
        let currentUser = null;
        let currentBalance = 10000;
        let isSpinning = false;
        let rotationAngle = 0;
        let spinInterval;
        let targetAngle = 0;
        let currentGameMode = 'normal';
        let currentBet = 10;
        let currentJp = 1000;
        let currentVIPLevel = 0;
        let vipRate = 0;
        let jpGuaranteed = false;

        // VIPé…ç½®
        const vipConfig = [
            { level: 0, name: 'æ™®é€šç”¨æˆ·', rate: 0 },
            { level: 1, name: 'æ™®é€šVIP', rate: 5 },
            { level: 2, name: 'è‡³å°ŠVIP', rate: 15 },
            { level: 3, name: 'é’»çŸ³VIP', rate: 30 },
            { level: 4, name: 'è¶…çº§VIP', rate: 50 },
            { level: 5, name: 'è¶…çº§è‡³å°ŠVIP', rate: 100 }
        ];

        // åŸºç¡€å¥–é¡¹é…ç½®
        const basePrizes = [
            { name: '5ä¸ªæ¸¸æˆå¸', value: 5, type: 'coin' },
            { name: '10ä¸ªæ¸¸æˆå¸', value: 10, type: 'coin' },
            { name: '20ä¸ªæ¸¸æˆå¸', value: 20, type: 'coin' },
            { name: '30ä¸ªæ¸¸æˆå¸', value: 30, type: 'coin' },
            { name: '50ä¸ªæ¸¸æˆå¸', value: 50, type: 'coin' },
            { name: 'ä½™é¢Ã—2', value: 2, type: 'double' },
            { name: 'JPå¤§å¥–', value: currentJp, type: 'jp' }
        ];

        // åˆå§‹åŒ–æ¸¸æˆæ•°æ®ï¼ˆç™»å½•åï¼‰
        function initGameData(user) {
            currentUser = user;
            currentBalance = user.balance;
            currentVIPLevel = user.vipLevel || 0;
            vipRate = user.vipRate || 0;
            jpGuaranteed = user.jpGuaranteed || false;

            // æ›´æ–°UI
            currentUsernameEl.textContent = user.username;
            coinBalanceEl.textContent = currentBalance;
            currentVipEl.textContent = vipConfig[currentVIPLevel].name;
            vipRateEl.textContent = `${vipRate}%`;

            // æ›´æ–°å¥–é¡¹é…ç½®
            updatePrizes();
            // æ¸²æŸ“æ’è¡Œæ¦œ
            renderRanking();
        }

        // æ›´æ–°å¥–é¡¹é…ç½®
        function updatePrizes() {
            basePrizes[6].value = currentJp;
            jpTextEl.textContent = `JP${currentJp}`;
            prizeJpEl.textContent = `JPå¤§å¥– ${currentJp}å¸`;
            
            if (currentGameMode === 'rich') {
                multiTextEl.textContent = 'Ã—5';
                prizeMultiEl.textContent = 'ä½™é¢Ã—5';
                basePrizes[5].value = 5;
            } else {
                multiTextEl.textContent = currentGameMode === 'high' ? 'Ã—3' : 'Ã—2';
                prizeMultiEl.textContent = `ä½™é¢Ã—${currentGameMode === 'high' ? 3 : 2}`;
                basePrizes[5].value = currentGameMode === 'high' ? 3 : 2;
            }
        }

        // æ¸¸æˆæ¨¡å¼åˆ‡æ¢
        document.querySelectorAll('.mode-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                if (isSpinning) return;

                document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');

                currentGameMode = btn.dataset.mode;
                currentBet = parseInt(btn.dataset.bet);
                currentJp = parseInt(btn.dataset.jp);

                currentBetEl.textContent = currentBet;
                currentJpEl.textContent = currentJp;
                updatePrizes();
            });
        });

        // VIPåŠç†åŠŸèƒ½
        document.querySelectorAll('.buy-vip-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const vipCard = btn.closest('.vip-card');
                const level = parseInt(vipCard.dataset.level);
                const price = parseInt(vipCard.dataset.price);
                const rate = parseInt(vipCard.dataset.rate);

                if (currentVIPLevel >= level) {
                    modalTitle.textContent = 'âš ï¸ æ“ä½œæç¤º';
                    modalDesc.textContent = `æ‚¨å·²å¼€é€š${vipConfig[level].name}æˆ–æ›´é«˜ç­‰çº§ï¼Œæ— éœ€é‡å¤åŠç†ï½`;
                    prizeModal.classList.add('active');
                    return;
                }

                if (currentBalance < price) {
                    balanceModal.classList.add('active');
                    return;
                }

                // æ‰£é™¤å¸æ•°ï¼Œæ›´æ–°VIPçŠ¶æ€
                currentBalance -= price;
                currentVIPLevel = level;
                vipRate = rate;

                // è¶…çº§è‡³å°ŠVIP JPå¿…ä¸­
                if (level === 5) {
                    jpGuaranteed = true;
                }

                // æ›´æ–°ç”¨æˆ·æ•°æ®
                currentUser.balance = currentBalance;
                currentUser.vipLevel = currentVIPLevel;
                currentUser.vipRate = vipRate;
                currentUser.jpGuaranteed = jpGuaranteed;
                saveCurrentUser(currentUser);

                // æ›´æ–°UI
                coinBalanceEl.textContent = currentBalance;
                currentVipEl.textContent = vipConfig[level].name;
                vipRateEl.textContent = `${rate}%`;
                vipCard.classList.add('active');

                // æ˜¾ç¤ºæˆåŠŸå¼¹çª—
                vipSuccessDescEl.textContent = `æˆåŠŸå¼€é€š${vipConfig[level].name}ï¼Œä¸­å¥–æ¦‚ç‡+${rate}%ï½`;
                vipSuccessModal.classList.add('active');

                // æ›´æ–°æ’è¡Œæ¦œ
                updateRanking(currentUser);
            });
        });

        // å¼€å§‹æ—‹è½¬
        startBtn.addEventListener('click', () => {
            if (isSpinning) return;
            if (currentBalance < currentBet) {
                balanceModal.classList.add('active');
                return;
            }

            // æ‰£é™¤æŠ•å¸é‡‘é¢
            currentBalance -= currentBet;
            coinBalanceEl.textContent = currentBalance;
            // æ›´æ–°ç”¨æˆ·ä½™é¢
            currentUser.balance = currentBalance;
            saveCurrentUser(currentUser);

            isSpinning = true;
            startBtn.disabled = true;
            stopBtn.disabled = false;
            document.getElementById('modal-content').classList.remove('jp-animation');

            // ç”Ÿæˆç›®æ ‡è§’åº¦
            const fullCircles = 3 + Math.random() * 2;
            let randomAngle = Math.random() * 360;

            // JPå¿…ä¸­å¤„ç†
            if (jpGuaranteed) {
                randomAngle = 308.58 + Math.random() * 10;
                jpGuaranteed = currentUser.jpGuaranteed = false;
                saveCurrentUser(currentUser);
            } 
            // VIPæ¦‚ç‡åŠ æˆ
            else if (vipRate > 0) {
                const highValueChance = vipRate / 100;
                if (Math.random() < highValueChance) {
                    randomAngle = [154.29, 205.72, 257.15, 308.58][Math.floor(Math.random() * 4)];
                }
            }

            targetAngle = fullCircles * 360 + randomAngle;

            // é«˜é€Ÿåˆå§‹æ—‹è½¬
            let speed = 10;
            clearInterval(spinInterval);
            spinInterval = setInterval(() => {
                rotationAngle += speed;
                wheel.style.transform = `rotate(${rotationAngle}deg)`;

                if (rotationAngle > targetAngle - 360) {
                    speed = Math.max(0.5, speed - 0.1);
                }
            }, 20);
        });

        // åœæ­¢æ—‹è½¬
        stopBtn.addEventListener('click', () => {
            if (!isSpinning) return;

            clearInterval(spinInterval);
            wheel.style.transform = `rotate(${targetAngle}deg)`;
            isSpinning = false;
            startBtn.disabled = false;
            stopBtn.disabled = true;

            // è®¡ç®—ä¸­å¥–å¥–é¡¹
            const normalizedAngle = targetAngle % 360;
            const prizeIndex = Math.floor(normalizedAngle / (360 / basePrizes.length));
            const winningPrize = basePrizes[prizeIndex];

            // æ›´æ–°ä½™é¢
            updateBalance(winningPrize);
            // æ˜¾ç¤ºä¸­å¥–å¼¹çª—
            showPrizeModal(winningPrize);
            // æ›´æ–°æ’è¡Œæ¦œ
            updateRanking(currentUser);
        });

        // æ›´æ–°ä½™é¢
        function updateBalance(prize) {
            switch (prize.type) {
                case 'coin':
                    currentBalance += prize.value;
                    break;
                case 'double':
                    currentBalance *= prize.value;
                    break;
                case 'jp':
                    currentBalance += prize.value;
                    break;
            }
            currentBalance = Math.floor(currentBalance);
            coinBalanceEl.textContent = currentBalance;
            // æ›´æ–°ç”¨æˆ·ä½™é¢
            currentUser.balance = currentBalance;
            saveCurrentUser(currentUser);
        }

        // æ˜¾ç¤ºä¸­å¥–å¼¹çª—
        function showPrizeModal(prize) {
            if (prize.type === 'jp') {
                modalTitle.textContent = 'ğŸ‰ æ­å–œä¸­JPå¤§å¥–ï¼';
                modalDesc.textContent = `è·å¾—${prize.value}ä¸ªæ¸¸æˆå¸ï¼Œå¥½è¿çˆ†æ£šï¼`;
                document.getElementById('modal-content').classList.add('jp-animation');
            } else if (prize.type === 'double') {
                modalTitle.textContent = 'âœ¨ å€æ•°å¥½è¿ï¼';
                modalDesc.textContent = `å½“å‰ä½™é¢Ã—${prize.value}ï¼Œå‰©ä½™${currentBalance}ä¸ªæ¸¸æˆå¸ï½`;
            } else {
                modalTitle.textContent = 'ğŸŠ æ­å–œä¸­å¥–ï¼';
                modalDesc.textContent = `è·å¾—${prize.name}ï¼Œå‰©ä½™${currentBalance}ä¸ªæ¸¸æˆå¸ï½`;
            }
            prizeModal.classList.add('active');
        }

        // -------------------------- æ’è¡Œæ¦œæ¸²æŸ“ --------------------------
        function renderRanking() {
            const ranking = getRanking();
            if (ranking.length === 0) {
                rankingEmptyEl.style.display = 'block';
                return;
            }

            rankingEmptyEl.style.display = 'none';
            rankingListEl.innerHTML = '';

            ranking.forEach((item, index) => {
                const isCurrentUser = currentUser && item.username === currentUser.username;
                const rankingItem = document.createElement('div');
                rankingItem.className = `ranking-item ${isCurrentUser ? 'current-user' : ''}`;
                rankingItem.innerHTML = `
                    <div class="ranking-rank ${index === 0 ? 'top1' : index === 1 ? 'top2' : index === 2 ? 'top3' : ''}">
                        ${index + 1}
                    </div>
                    <div class="ranking-username">${item.username}</div>
                    <div class="ranking-score">${item.balance} å¸</div>
                `;
                rankingListEl.appendChild(rankingItem);
            });
        }

        // -------------------------- å¼¹çª—å…³é—­äº‹ä»¶ --------------------------
        document.querySelectorAll('.modal-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                prizeModal.classList.remove('active');
                balanceModal.classList.remove('active');
                vipSuccessModal.classList.remove('active');
            });
        });

        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.classList.remove('active');
                }
            });
        });

        // -------------------------- åˆå§‹åŒ–æ¸¸æˆ --------------------------
        initStorage();
        const savedCurrentUser = getCurrentUser();
        if (savedCurrentUser) {
            initGameData(savedCurrentUser);
            loginMask.classList.add('hidden');
        } else {
            loginMask.classList.remove('hidden');
        }
    </script>
</body>
</html>
